# 第 23.3 节 FreeBSD 中文 TTY 控制台

不同于 Linux，Linus 拒绝合并 i18n 补丁到 Linux 内核里面：

>“我们不会对内核字符串进行国际化，过去也从未做过。是的，有些人曾尝试为翻译目的建立内核消息的数据库，但我坚决拒绝将这一部分纳入开发流程。这很烦。”
>
>“说白了，我只需要简单的英文界面。如果你不爽，那你就别用。就这样。”
>
>    ——Linus Torvalds

FreeBSD 新型终端 VT，是原生支持 cjk 的，所以放个字体进去，即可显示中文。

本说明以 FreeBSD 14.2 RELEASE 为例。

字体格式为 `.fnt`

命令: `$ vidcontrol -f ABC.fnt`

FreeBSD 基本系统提供了一个工具，可用于将 bdf、hex 转换为 fnt

```sh
vtfontcvt [ -h 高度 ] [ -v ] [ -w 宽度] [字体]
```

- 示例：


![未加入字体的 tty](../.gitbook/assets/tty0.png)

```sh
$ fetch https://people.freebsd.org/~emaste/newcons/b16.fnt
$ vidcontrol -f b16.fnt
```


![设置完成后的 tty](../.gitbook/assets/tty1.png)

命令都是临时的，若要永久生效，将其加入 `/etc/rc.conf`:

```sh
allscreens_flags="-f /root/b16.fnt"
```

## 参考文献

- [rc.conf](https://man.freebsd.org/cgi/man.cgi?query=rc.conf&sektion=5)，此页搜索“allscreens_flags”
- [vidcontrol font and color via /etc/rc.conf problem](https://forums.freebsd.org/threads/vidcontrol-font-and-color-via-etc-rc-conf-problem.81696/)
- [Custom cjktty patches](https://github.com/zhmars/cjktty-patches)，Linux 中文 tty 内核补丁，作者似乎已经放弃维护了
- [Internationalizing the Kernel](https://www.linuxjournal.com/content/internationalizing-kernel)，linus 言论出处
