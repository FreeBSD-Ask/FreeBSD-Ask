# 第 17.5 节 MySQL 8.X


## 安装

### MySQL 8.0 LTS

安装：

```sh
# pkg install mysql80-server
```

或编译安装：

```sh
# cd /usr/ports/databases/mysql80-server/ 
# make install clean
```



### MySQL 8.4 LTS

安装：

```sh
# pkg install mysql84-server
```

或编译安装：

```sh
# cd /usr/ports/databases/mysql84-server/ 
# make install clean
```

查看安装后说明（8.0 类似）：

```sh
root@ykla:~ # pkg info -D mysql84-server
mysql84-server-8.4.3_1:
On install:
There is no initial password for first time use of MySQL. # 即无密码
Keep in mind to reset it to a secure password.

MySQL 8.4 has a default /usr/local/etc/mysql/my.cnf,
remember to replace it with your own
or set `mysql_optfile="$YOUR_CNF_FILE` in rc.conf.

On upgrade:
As of MySQL 8.0.16, the MySQL server performs the upgrade tasks previously
handled by mysql_upgrade. Consequently, mysql_upgrade is unneeded and is
deprecated as of that version, and will be removed in a future MySQL version.
Because mysql_upgrade no longer performs upgrade tasks,
it exits with status 0 unconditionally.
```

## 启动服务

```sh
# sysrc mysql_enable="YES"
# service  mysql-server start
Starting mysql.
```

## 登录

根据安装后说明，mysql 8.0、8.4 默认密码为空，直接回车即可。

```sql
root@ykla:~ # mysql -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 8
Server version: 8.0.27 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or 'h' for help. Type 'c' to clear the current input statement.

root@localhost [(none)]>
```

## 修改密码

设置密码为 `z`，然后刷新权限。

```sh
root@localhost [(none)]> alter user 'root'@'localhost' identified by 'z';
Query OK, 0 rows affected (0.02 sec)

root@localhost [(none)]> flush privileges;
Query OK, 0 rows affected (0.00 sec)
```

重新登录：

```sql
root@localhost [(none)]> quit;
Bye
root@ykla:~ # mysql -uroot -p
Enter password:
Welcome to the MySQL monitor.  Commands end with ; or g.
Your MySQL connection id is 9
Server version: 8.0.27 Source distribution

Copyright (c) 2000, 2021, Oracle and/or its affiliates.

Oracle is a registered trademark of Oracle Corporation and/or its
affiliates. Other names may be trademarks of their respective
owners.

Type 'help;' or 'h' for help. Type 'c' to clear the current input statement.

root@localhost [(none)]> show databases;
+--------------------+
| Database           |
+--------------------+
| information_schema |
| mysql              |
| performance_schema |
| sys                |
+--------------------+
4 rows in set (0.01 sec)

root@localhost [(none)]>
```
