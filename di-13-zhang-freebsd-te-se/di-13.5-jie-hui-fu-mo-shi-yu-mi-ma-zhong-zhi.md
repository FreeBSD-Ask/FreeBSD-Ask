# 13.5 Live 镜像与系统急救

开机按 2 进入 `single user` 模式，即可进入单用户模式。该模式下默认无需输入 root 密码，可使用 `passwd` 命令自行重置密码。


## UFS 文件系统

```sh
# mount -u /             # 将根 UFS 文件系统挂载为可写
# mount -a -t ufs        # 挂载所有 UFS 文件系统
```

## ZFS 文件系统

>**技巧**
>
>在大多数情况下，FreeBSD Live 镜像不可直接使用，无法创建挂载点，也无法修改为可写模式。
>
>建议使用 Ubuntu 24.04 或更高版本的 Live 模式对 ZFS 磁盘进行操作，例如还原快照等。
>
>![Ubuntu ZFS](../.gitbook/assets/Ubuntu-zfs.png)

```sh
# mount -u               # 将根文件系统挂载为可写
# zfs mount -a           # 挂载所有 ZFS 文件系统
```

挂载 ZFS 根文件系统：

```sh
# zpool import -fR /mnt zroot  # 强制导入 zroot ZFS 池到 /mnt
```

### 故障排除与未竟事宜

#### `passwd: pam_chauthtok(): Error in service module`

请检查 ZFS 文件系统是否处于只读状态：

```sh
# zfs get all | grep readonly
```

解除 ZFS 文件系统只读属性：

```sh
# zfs set readonly=off zroot
```

#### 参考文献

- [one ZFS file system always starts with readonly=on temporary on boot](https://github.com/openzfs/zfs/issues/2133) [备份](https://web.archive.org/web/20260115041705/https://github.com/openzfs/zfs/issues/2133)

## 使用 U 盘设备

将指定 U 盘分区挂载到 /mnt 并以读写模式访问：

```sh
# mount /dev/adaXpN -o rw /mnt
```

参数说明：

- `ada` 可以通过命令 `dmesg` 判断进行替换
- `X`、`N` 的参数取决于具体设备编号。
