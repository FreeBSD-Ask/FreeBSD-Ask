# 第22.6节 QT 环境的配置

安装 Qt Creator

```
# pkg install qtcreator
```

Qt Creator 安装包里已经包含中文界面，但实现依赖于 Qt 框架，要使用中文界面的再安装

```
# pkg install qt5-l10n
```

当然如果要写支持多语种的 Qt 程序时这个包也是要的。

Qt creator 界面语言默认跟随系统，所以如果已经在相应的地方

```
export LANG=zh_CN.UTF-8
export LC_ALL=zh_CN.UTF-8
```

Qt creator 界面已经为中文，或者菜单里 Edit -> Preferences -> Environment -> Interface -> Language 手动更改。

编译器调试器可以不用配置傻瓜上手非常方便，比 win 上使用方便很多。

Qt Creator 写出来的程序,可能出现不能输入中文。 问题在于 Qt 支持输入法的方式是用插件的方式进行的。

```
$ ls /usr/local/lib/qt5/plugins/platforminputcontexts
```

可以看到以下输出：

```
libfcitx5platforminputcontextplugin.so
libibusplatforminputcontextplugin.so
```

分别对应 ibus 和 fcitx 。中文不能输入就是因为这两个文件依赖的库版本可能存在不兼容问题。这个锅 Qt 不背 Qt creator 不背，输入法也不背,这么多的软件要维护有个一个库版本对不上也正常。其中 ibus 的插件由 qt 提供，fcitx 由 fcitx 提供。

fcitx 可用的解决办法是用 ports 方式安装，链接依赖库。即：

```
# pkg delete fcitx5-qt
# cd /usr/ports/textproc/fcitx5-qt
# make install clean
```

之后正常配置 fcitx 即可。

ibus 的输入法插件由 qt 提供理论上 ports 安装 qt5-gui 可行，但 ports 安装 qt 属于吃撑了，没去试。原来很喜欢 ibus 的。

