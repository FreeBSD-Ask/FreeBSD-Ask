# 10.1 HTTP 代理

V2Ray 或 Clash 开启允许局域网连接后，即可按照下文进行配置。

显示当前用户正在使用的 shell

```sh
$ echo $SHELL
```

## HTTP_PROXY 代理

### 若使用 `sh`、`bash` 或 `zsh`
  
>**注意**
>
>此处的环境变量 HTTP_PROXY 必须使用大写，小写不生效。
  
- 设置 HTTP 代理环境变量：

```sh
# export HTTP_PROXY=http://192.168.X.X:7890
```

>**警告**
>
>本文中的 `192.168.X.X:7890` 仅为示例，请根据实际情况填写，直接复制粘贴不会生效。

- 取消设置的 HTTP 代理环境变量：

```sh
# unset HTTP_PROXY
```

### 若使用 `csh`

在 csh 或 tcsh 中设置 HTTP 代理环境变量：

```sh
# setenv http_proxy http://192.168.X.X:7890
```

在 csh 或 tcsh 中取消 HTTP 代理环境变量：

```sh
# unsetenv http_proxy
```

## Git 代理

见本书其他章节。

## 浏览器配置代理

Chromium 本身在 `~/.config` 等目录下没有配置文件，也不支持通过环境变量指定默认代理服务器，但可以通过启动参数（Options）设置代理


为支持此参数的应用程序指定代理服务器和端口：

```sh
--proxy-server="<IP 地址>:<端口>"
```

启动 Chrome 并使用指定的本地代理服务器：

```sh
$ chrome --proxy-server="127.0.0.1:1234" # 请在终端执行
```

默认使用 HTTP 协议，为支持此参数的应用程序指定 SOCKS 代理服务器和端口：

```sh
--proxy-server="socks://<IP 地址>:<端口>"
```

为支持此参数的应用程序指定 SOCKS4 代理服务器和端口：

```sh
--proxy-server="socksv4://<IP 地址>:<端口>"
```

- 在图形界面下让 chromium 默认使用代理打开：

找到桌面环境为 Chromium 创建的 desktop 文件，通常位于 `~/.local/share/applications/` 目录下


使用你喜欢的编辑器打开上述目录下的 Chromium desktop 文件 `chromium-browser.desktop`，找到 `Exec=chrome %U` 这一行，并在其后添加所需参数：

```ini
Comment[zh_CN]=Google web browser based on WebKit
Comment=Google web browser based on WebKit
Encoding=UTF-8
Exec=chrome %U
GenericName[zh_CN]=
......
```

启动 Chrome 并使用指定的代理服务器：

```sh
Exec=chrome %U --proxy-server="192.168.2.163:20172"
```

### 单独为 Firefox 配置代理

由于 Firefox 在 Windows、GNU/Linux、macOS 以及 BSD 等系统的所有客户端的浏览器设置页面 > 网络设置选项卡中均提供 GUI 代理配置模块，本节不再赘述。

![FF-Proxy](../.gitbook/assets/FF-Proxy.png)

### 参考资料

- [FreeBSD Manual Pages: Chromium](https://man.freebsd.org/cgi/man.cgi?query=chrome&apropos=0&sektion=0&manpath=FreeBSD+13.2-RELEASE+and+Ports&arch=default&format=html)
- [FreeBSD Forums: chromium proxy settings page doesn't exist](https://forums.freebsd.org/threads/chromium-proxy-settings-page-doesnt-exist.31927/)
